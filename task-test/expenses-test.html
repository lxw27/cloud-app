<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Subscription Manager - Expenses</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
  <style>
    :root {
      --primary-color: #2563eb;
      --primary-light: #3b82f6;
      --primary-dark: #1d4ed8;
      --secondary-color: #e0f2fe;
      --text-color: #1e293b;
      --bg-color: #f8fafc;
      --card-bg: #ffffff;
      --border-color: #e2e8f0;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background-color: var(--bg-color);
      color: var(--text-color);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    /* Navigation */
    nav {
      background-color: var(--primary-color);
      color: white;
      padding: 1rem;
    }
    
    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
    }
    
    .nav-links {
      display: flex;
      gap: 2rem;
    }
    
    .nav-link {
      color: white;
      text-decoration: none;
      padding: 0.5rem;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    
    .nav-link:hover {
      background-color: var(--primary-dark);
    }
    
    .nav-link.active {
      background-color: var(--primary-dark);
    }
    
    .user-menu {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .user-menu button {
      background-color: var(--primary-dark);
      border: none;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      cursor: pointer;
    }
    
    /* Header Section */
    .page-header {
      margin: 2rem 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .page-title {
      font-size: 1.8rem;
      font-weight: 600;
    }
    
    .action-buttons {
      display: flex;
      gap: 1rem;
    }
    
    .btn {
      padding: 0.6rem 1.2rem;
      border-radius: 4px;
      font-weight: 500;
      cursor: pointer;
      transition: 0.3s;
      border: none;
    }
    
    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-dark);
    }
    
    .btn-outline {
      background-color: transparent;
      border: 1px solid var(--primary-color);
      color: var(--primary-color);
    }
    
    .btn-outline:hover {
      background-color: var(--secondary-color);
    }
    
    /* Expenses Section */
    .expenses-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    
    @media (max-width: 768px) {
      .expenses-container {
        grid-template-columns: 1fr;
      }
    }
    
    .card {
      background-color: var(--card-bg);
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border-color);
    }
    
    .card-title {
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .expense-summary {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-bottom: 1.5rem;
    }
    
    .expense-stat {
      background-color: var(--secondary-color);
      padding: 1rem;
      border-radius: 6px;
      text-align: center;
    }
    
    .expense-stat h3 {
      color: var(--primary-color);
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }
    
    .expense-stat p {
      font-size: 0.9rem;
      color: var(--text-color);
    }
    
    .chart-container {
      height: 300px;
      position: relative;
    }
    
    /* Filter Controls */
    .filter-controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      align-items: center;
    }
    
    .filter-group {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    select, input {
      padding: 0.5rem;
      border: 1px solid var(--border-color);
      border-radius: 4px;
      background-color: white;
    }
    
    /* Report Section */
    .report-section {
      margin-top: 2rem;
    }
    
    .report-actions {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1rem;
    }
    
    .table-container {
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1.5rem;
    }
    
    thead {
      background-color: var(--secondary-color);
    }
    
    th, td {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 1px solid var(--border-color);
    }
    
    th {
      font-weight: 600;
      color: var(--primary-dark);
    }
    
    tr:hover {
      background-color: rgba(59, 130, 246, 0.05);
    }
    
    .pagination {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .pagination button {
      padding: 0.5rem 0.75rem;
      background-color: var(--secondary-color);
      border: 1px solid var(--border-color);
      border-radius: 4px;
      cursor: pointer;
    }
    
    .pagination button.active {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-dark);
    }
    
    /* Report Generation Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background-color: var(--card-bg);
      border-radius: 8px;
      padding: 2rem;
      width: 500px;
      max-width: 90%;
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }
    
    .modal-title {
      font-size: 1.3rem;
      font-weight: 600;
    }
    
    .close-modal {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }
    
    .form-group {
      margin-bottom: 1.2rem;
    }
    
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    
    .modal-actions {
      display: flex;
      justify-content: flex-end;
      gap: 1rem;
      margin-top: 1.5rem;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="container nav-container">
      <div class="logo">SubsManager</div>
      <div class="nav-links">
        <a href="dashboard.html" class="nav-link">Dashboard</a>
        <a href="expenses.html" class="nav-link active">Expenses</a>
        <a href="reports.html" class="nav-link">Reports</a>
      </div>
      <div class="user-menu">
        <span>Welcome, User</span>
        <button id="logout-btn">Logout</button>
      </div>
    </div>
  </nav>

  <div class="container">
    <!-- Expenses Header -->
    <div class="page-header">
      <h1 class="page-title">Subscription Expenses</h1>
      <div class="action-buttons">
        <button class="btn btn-outline" id="filter-btn">
          <i class="fas fa-filter"></i> Filter
        </button>
        <button class="btn btn-primary" id="generate-report-btn">
          <i class="fas fa-file-export"></i> Generate Report
        </button>
      </div>
    </div>

    <!-- Filter Controls -->
    <div class="filter-controls">
      <div class="filter-group">
        <label for="time-period">Time Period:</label>
        <select id="time-period">
          <option value="monthly">Monthly</option>
          <option value="yearly">Yearly</option>
        </select>
      </div>
      <div class="filter-group">
        <label for="date-range">Date Range:</label>
        <input type="month" id="month-picker" value="2025-03">
        <input type="number" id="year-picker" value="2025" min="2000" max="2050" style="display:none;">
      </div>
      <div class="filter-group">
        <label for="categories">Categories:</label>
        <select id="categories">
          <option value="all">All Categories</option>
          <option value="streaming">Streaming</option>
          <option value="software">Software</option>
          <option value="other">Other</option>
        </select>
      </div>
    </div>

    <!-- Expenses Overview -->
    <div class="expenses-container">
      <!-- Monthly Breakdown -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Monthly Expenses</h2>
          <select id="chart-type-monthly">
            <option value="bar">Bar Chart</option>
            <option value="line">Line Chart</option>
          </select>
        </div>
        <div class="expense-summary">
          <div class="expense-stat">
            <h3>$145.86</h3>
            <p>Total this month</p>
          </div>
          <div class="expense-stat">
            <h3>$132.75</h3>
            <p>Previous month</p>
          </div>
          <div class="expense-stat">
            <h3>+9.8%</h3>
            <p>Month change</p>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="monthly-chart"></canvas>
        </div>
      </div>

      <!-- Category Breakdown -->
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Expenses by Category</h2>
        </div>
        <div class="expense-summary">
          <div class="expense-stat">
            <h3>$79.98</h3>
            <p>Streaming</p>
          </div>
          <div class="expense-stat">
            <h3>$34.99</h3>
            <p>Software</p>
          </div>
          <div class="expense-stat">
            <h3>$30.89</h3>
            <p>Other</p>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="category-chart"></canvas>
        </div>
      </div>
    </div>

    <!-- Reports Section -->
    <div class="report-section">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">Expenses Report</h2>
          <div class="action-buttons">
            <button class="btn btn-outline">
              <i class="fas fa-download"></i> Export CSV
            </button>
            <button class="btn btn-outline">
              <i class="fas fa-print"></i> Print
            </button>
          </div>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Subscription</th>
                <th>Category</th>
                <th>Billing Cycle</th>
                <th>Last Billed</th>
                <th>Amount</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Netflix</td>
                <td>Streaming</td>
                <td>Monthly</td>
                <td>Mar 10, 2025</td>
                <td>$15.99</td>
                <td><span class="badge active">Active</span></td>
              </tr>
              <tr>
                <td>Spotify Premium</td>
                <td>Streaming</td>
                <td>Monthly</td>
                <td>Mar 5, 2025</td>
                <td>$9.99</td>
                <td><span class="badge active">Active</span></td>
              </tr>
              <tr>
                <td>Adobe Creative Cloud</td>
                <td>Software</td>
                <td>Monthly</td>
                <td>Mar 15, 2025</td>
                <td>$54.99</td>
                <td><span class="badge active">Active</span></td>
              </tr>
              <tr>
                <td>Xbox Game Pass</td>
                <td>Gaming</td>
                <td>Monthly</td>
                <td>Mar 12, 2025</td>
                <td>$14.99</td>
                <td><span class="badge active">Active</span></td>
              </tr>
              <tr>
                <td>Disney+</td>
                <td>Streaming</td>
                <td>Monthly</td>
                <td>Mar 7, 2025</td>
                <td>$7.99</td>
                <td><span class="badge active">Active</span></td>
              </tr>
              <tr>
                <td>Microsoft 365</td>
                <td>Software</td>
                <td>Yearly</td>
                <td>Jan 15, 2025</td>
                <td>$69.99/year</td>
                <td><span class="badge active">Active</span></td>
              </tr>
              <tr>
                <td>Amazon Prime</td>
                <td>Shopping</td>
                <td>Yearly</td>
                <td>Feb 3, 2025</td>
                <td>$139.00/year</td>
                <td><span class="badge active">Active</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="pagination">
          <button>1</button>
          <button class="active">2</button>
          <button>3</button>
          <button>Next</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Generate Report Modal -->
  <div class="modal" id="report-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title">Generate Expense Report</h2>
        <button class="close-modal">&times;</button>
      </div>
      <div class="form-group">
        <label for="report-title">Report Title</label>
        <input type="text" id="report-title" placeholder="Subscription Expenses Report" class="form-control">
      </div>
      <div class="form-group">
        <label for="report-period">Time Period</label>
        <select id="report-period" class="form-control">
          <option value="current-month">Current Month</option>
          <option value="last-month">Last Month</option>
          <option value="current-year">Current Year</option>
          <option value="custom">Custom Range</option>
        </select>
      </div>
      <div class="form-group" id="custom-date-range" style="display:none;">
        <label>Custom Date Range</label>
        <div style="display:flex; gap:10px;">
          <input type="date" id="start-date" class="form-control">
          <input type="date" id="end-date" class="form-control">
        </div>
      </div>
      <div class="form-group">
        <label for="report-format">Format</label>
        <select id="report-format" class="form-control">
          <option value="pdf">PDF</option>
          <option value="csv">CSV</option>
          <option value="excel">Excel</option>
        </select>
      </div>
      <div class="form-group">
        <label>Include in Report</label>
        <div>
          <input type="checkbox" id="include-summary" checked>
          <label for="include-summary" style="display:inline;">Expense Summary</label>
        </div>
        <div>
          <input type="checkbox" id="include-charts" checked>
          <label for="include-charts" style="display:inline;">Charts & Graphs</label>
        </div>
        <div>
          <input type="checkbox" id="include-details" checked>
          <label for="include-details" style="display:inline;">Detailed Transaction List</label>
        </div>
      </div>
      <div class="modal-actions">
        <button class="btn btn-outline" id="cancel-report">Cancel</button>
        <button class="btn btn-primary" id="download-report">Generate Report</button>
      </div>
    </div>
  </div>

  <script>
    // Sample data for charts
    const monthlyData = {
      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
      datasets: [{
        label: 'Monthly Expenses',
        data: [120.89, 118.75, 132.75, 125.50, 140.25, 145.86],
        backgroundColor: 'rgba(37, 99, 235, 0.6)',
        borderColor: 'rgba(37, 99, 235, 1)',
        borderWidth: 1
      }]
    };

    const categoryData = {
      labels: ['Streaming', 'Software', 'Gaming', 'Shopping', 'Other'],
      datasets: [{
        label: 'Expense by Category',
        data: [79.98, 34.99, 14.99, 11.58, 4.32],
        backgroundColor: [
          'rgba(37, 99, 235, 0.8)',
          'rgba(59, 130, 246, 0.8)',
          'rgba(96, 165, 250, 0.8)',
          'rgba(147, 197, 253, 0.8)',
          'rgba(191, 219, 254, 0.8)'
        ],
        borderColor: [
          'rgba(37, 99, 235, 1)',
          'rgba(59, 130, 246, 1)',
          'rgba(96, 165, 250, 1)',
          'rgba(147, 197, 253, 1)',
          'rgba(191, 219, 254, 1)'
        ],
        borderWidth: 1
      }]
    };

    // Initialize charts
    document.addEventListener('DOMContentLoaded', function() {
      // Monthly Chart
      const monthlyCtx = document.getElementById('monthly-chart').getContext('2d');
      const monthlyChart = new Chart(monthlyCtx, {
        type: 'bar',
        data: monthlyData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return '$' + value;
                }
              }
            }
          }
        }
      });

      // Category Chart
      const categoryCtx = document.getElementById('category-chart').getContext('2d');
      const categoryChart = new Chart(categoryCtx, {
        type: 'pie',
        data: categoryData,
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  const label = context.label || '';
                  const value = context.raw || 0;
                  return label + ': $' + value;
                }
              }
            }
          }
        }
      });

      // Chart type toggle for monthly chart
      document.getElementById('chart-type-monthly').addEventListener('change', function() {
        monthlyChart.destroy();
        const newType = this.value;
        const newChart = new Chart(monthlyCtx, {
          type: newType,
          data: monthlyData,
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function(value) {
                    return '$' + value;
                  }
                }
              }
            }
          }
        });
      });

      // Time period toggle
      document.getElementById('time-period').addEventListener('change', function() {
        const isMonthly = this.value === 'monthly';
        document.getElementById('month-picker').style.display = isMonthly ? 'block' : 'none';
        document.getElementById('year-picker').style.display = isMonthly ? 'none' : 'block';
      });

      // Modal handling
      const reportModal = document.getElementById('report-modal');
      const generateReportBtn = document.getElementById('generate-report-btn');
      const closeModalBtn = document.querySelector('.close-modal');
      const cancelReportBtn = document.getElementById('cancel-report');
      
      generateReportBtn.addEventListener('click', function() {
        reportModal.classList.add('active');
      });
      
      closeModalBtn.addEventListener('click', function() {
        reportModal.classList.remove('active');
      });
      
      cancelReportBtn.addEventListener('click', function() {
        reportModal.classList.remove('active');
      });
      
      // Custom date range toggle
      document.getElementById('report-period').addEventListener('change', function() {
        const customDateRange = document.getElementById('custom-date-range');
        customDateRange.style.display = this.value === 'custom' ? 'block' : 'none';
      });
      
      // Download report button
      document.getElementById('download-report').addEventListener('click', function() {
        alert('Report generated successfully! Download started.');
        reportModal.classList.remove('active');
      });
    });
  </script>
</body>
</html>